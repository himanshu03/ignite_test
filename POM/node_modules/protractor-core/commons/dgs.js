/**
 * Created by lle on 3/21/16.
 */
/**
 * @ngdoc object
 * @name dgs
 * @description
 * 	Testing of data generation service<br>
 */

var request = require('superagent');
var envConf = require('../conf/env_conf.js'), env = new envConf();

var dgs = function (brw) {
  'use strict';
  var that = this;
  if(brw){
    that.browser = brw;
  }

  /**
   * @ngdoc Methods
   * @name dgs_GET_branch_name
   * @methodOf dgs
   * @description returns the current branch based on ORPC CommonAPI::GetContext
   * @author dgs
   */
  this.dgs_GET_branch_name = function () {
    var deferredRequest = protractor.promise.defer();
    request
      .get('http://172.27.67.233:9000/api/demo/orpc/branch-name')
      .set('Accept', 'application/json')
      .end(function (err, res) {
        if (err) {
          console.error(err);
          deferredRequest.cancel(err);
        } else {
          deferredRequest.fulfill(res);
          console.log(res.text);
        }
      });
    return deferredRequest.promise;
  };


};
module.exports = dgs;